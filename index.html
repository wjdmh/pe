<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uni-League: ëŒ€í•™ ìŠ¤í¬ì¸  ë§¤ì¹­</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase Configuration (Placeholder) -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      // ì¶”í›„ ë°±ì—”ë“œ ì—°ê²° ì‹œ ì‚¬ìš©
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Glassmorphism íš¨ê³¼ */
        .glass { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255, 255, 255, 0.3); }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(16px); border-top: 1px solid rgba(0,0,0,0.05); }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- ëª¨ë°”ì¼ ì»¨í…Œì´ë„ˆ -->
    <div class="max-w-md mx-auto min-h-screen bg-gray-50 shadow-2xl relative overflow-hidden">
        
        <!-- ìƒë‹¨ í—¤ë” (Glass Style) -->
        <header class="glass fixed top-0 w-full max-w-md z-50 px-5 py-4 flex justify-between items-center">
            <div class="flex items-center cursor-pointer" onclick="router('home')">
                <i class="fa-solid fa-medal text-indigo-600 text-xl mr-2"></i>
                <span class="text-lg font-extrabold italic tracking-tighter text-slate-800">Uni-League</span>
            </div>
            <div id="header-actions" class="hidden flex items-center space-x-3">
                <span class="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-1 rounded-full tracking-wide">CAPTAIN</span>
                <button class="relative text-gray-400 hover:text-indigo-600 transition">
                    <i class="fa-regular fa-bell text-xl"></i>
                    <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                </button>
            </div>
        </header>
        <div class="h-16"></div> <!-- í—¤ë” ê³µê°„ í™•ë³´ -->

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main id="app-container" class="p-5 pb-28">
            
            <!-- 1. ë¡œê·¸ì¸ í™”ë©´ (ì•± ì‹œì‘ í™”ë©´) -->
            <div id="page-login" class="fade-in flex flex-col justify-center min-h-[80vh]">
                <div class="text-center mb-10">
                    <div class="inline-block relative mb-4">
                        <div class="absolute inset-0 bg-indigo-500 blur-2xl opacity-20 rounded-full"></div>
                        <i class="fa-solid fa-trophy text-6xl text-indigo-600 relative z-10"></i>
                    </div>
                    <h2 class="text-3xl font-extrabold text-slate-900 mb-2 leading-tight">ëŒ€í•™ ìŠ¤í¬ì¸ ì˜<br>ìƒˆë¡œìš´ ë¦¬ê·¸</h2>
                    <p class="text-slate-500 text-sm">ëŒ€í•™ ìŠ¤í¬ì¸  ë™ì•„ë¦¬ì˜<br>ìƒˆë¡œìš´ ë§¤ì¹­ í”Œë«í¼</p>
                </div>
                
                <div class="space-y-4">
                    <div class="space-y-2">
                        <input type="email" placeholder="í•™êµ ì´ë©”ì¼ (@ac.kr)" class="w-full p-4 bg-white rounded-2xl border border-slate-200 shadow-sm outline-none focus:border-indigo-500 transition">
                        <input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" class="w-full p-4 bg-white rounded-2xl border border-slate-200 shadow-sm outline-none focus:border-indigo-500 transition">
                    </div>
                    
                    <button onclick="router('home')" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition transform active:scale-[0.98]">
                        ë¡œê·¸ì¸
                    </button>
                </div>

                <!-- ë™ì•„ë¦¬ ë“±ë¡ ìœ ë„ -->
                <div class="mt-8 text-center">
                    <p class="text-xs text-slate-400 mb-2">ì²˜ìŒì´ì‹ ê°€ìš”?</p>
                    <button onclick="alert('ë°ëª¨ ë²„ì „ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ì„ ì´ìš©í•´ì£¼ì„¸ìš”.')" class="text-indigo-600 text-sm font-bold hover:underline">
                        ìƒˆ ë™ì•„ë¦¬ ë“±ë¡í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- 2. í™ˆ (ë§¤ì¹˜ ì°¾ê¸°) -->
            <div id="page-home" class="hidden fade-in">
                <div class="mb-6 pt-2">
                    <p class="text-xs text-slate-500 font-medium mb-1">ì˜¤ëŠ˜ ì»¨ë””ì…˜ ì–´ë•Œìš”?</p>
                    <h2 class="text-2xl font-bold text-slate-800">ì£¼ì¥ë‹˜, <br>ë§¤ì¹­ì„ ì°¾ì•„ë³¼ê¹Œìš”? ğŸ”¥</h2>
                </div>

                <!-- í•„í„° ë²„íŠ¼ -->
                <div class="flex space-x-2 overflow-x-auto pb-2 scrollbar-hide mb-4">
                    <button onclick="filterMatches('all', this)" class="filter-btn bg-indigo-600 text-white px-4 py-2 rounded-full text-xs font-bold shadow-md transition shrink-0">ì „ì²´</button>
                    <button onclick="filterMatches('9man', this)" class="filter-btn bg-white text-slate-500 border border-slate-200 px-4 py-2 rounded-full text-xs font-bold shrink-0 hover:bg-gray-50 transition">9ì¸ì œ</button>
                    <button onclick="filterMatches('6man', this)" class="filter-btn bg-white text-slate-500 border border-slate-200 px-4 py-2 rounded-full text-xs font-bold shrink-0 hover:bg-gray-50 transition">6ì¸ì œ</button>
                    <button onclick="filterMatches('male', this)" class="filter-btn bg-white text-slate-500 border border-slate-200 px-4 py-2 rounded-full text-xs font-bold shrink-0 hover:bg-gray-50 transition">ë‚¨ìë¶€</button>
                    <button onclick="filterMatches('female', this)" class="filter-btn bg-white text-slate-500 border border-slate-200 px-4 py-2 rounded-full text-xs font-bold shrink-0 hover:bg-gray-50 transition">ì—¬ìë¶€</button>
                    <button onclick="filterMatches('mixed', this)" class="filter-btn bg-white text-slate-500 border border-slate-200 px-4 py-2 rounded-full text-xs font-bold shrink-0 hover:bg-gray-50 transition">í˜¼ì„±</button>
                </div>

                <!-- ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ (JSë¡œ ë Œë”ë§) -->
                <div id="match-list-container" class="space-y-4 mb-10 min-h-[300px]">
                    <!-- JavaScriptê°€ ì—¬ê¸°ì— ì¹´ë“œë¥¼ ì±„ì›Œë„£ìŠµë‹ˆë‹¤ -->
                </div>

                <!-- í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ (ê¸€ì“°ê¸°) -->
                <button onclick="router('write-post')" class="fixed bottom-24 right-5 w-14 h-14 bg-slate-900 text-white rounded-full shadow-2xl shadow-slate-900/40 flex items-center justify-center hover:scale-110 transition z-40">
                    <i class="fa-solid fa-plus text-xl"></i>
                </button>

                <!-- ë­í‚¹ ì„¹ì…˜ -->
                <div class="mt-10 pt-8 border-t border-gray-200">
                    <div class="flex justify-between items-end mb-5">
                        <h3 class="font-bold text-lg text-slate-800">ğŸ† ì‹¤ì‹œê°„ ë­í‚¹</h3>
                        <span class="text-[10px] text-slate-400">ìŠ¹ë¥  ê¸°ì¤€</span>
                    </div>
                    <div class="bg-white rounded-2xl p-1 shadow-sm border border-slate-100">
                        <table class="w-full text-sm text-left">
                            <tbody class="divide-y divide-slate-50">
                                <tr class="hover:bg-slate-50"><td class="p-3 font-bold text-yellow-500 w-8">1</td><td class="font-bold text-slate-700">í•œì²´ëŒ€ KNSU</td><td class="text-right p-3 font-bold text-indigo-600">92%</td></tr>
                                <tr class="hover:bg-slate-50"><td class="p-3 font-bold text-slate-400 w-8">2</td><td class="font-bold text-slate-700">í•œì‹ ëŒ€ ë¹„ìƒ</td><td class="text-right p-3 font-bold text-indigo-600">88%</td></tr>
                                <tr class="hover:bg-slate-50"><td class="p-3 font-bold text-slate-400 w-8">3</td><td class="font-bold text-slate-700">ì—°ì„¸ëŒ€ ë°°êµ¬ë¶€</td><td class="text-right p-3 font-bold text-indigo-600">85%</td></tr>
                                <tr class="hover:bg-slate-50"><td class="p-3 font-bold text-slate-300 w-8">4</td><td class="text-slate-600">ì„œìš¸ëŒ€í•™êµ</td><td class="text-right p-3 text-slate-400">70%</td></tr>
                                <tr class="hover:bg-slate-50"><td class="p-3 font-bold text-slate-300 w-8">5</td><td class="text-slate-600">ê³ ë ¤ëŒ€í•™êµ</td><td class="text-right p-3 text-slate-400">60%</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 3. ë¼ì»¤ë£¸ (íŒ€ ê´€ë¦¬) -->
            <div id="page-locker" class="hidden fade-in">
                <div class="flex items-center justify-between mb-6 pt-2">
                    <h2 class="text-2xl font-bold text-slate-800">ë¼ì»¤ë£¸</h2>
                    <div class="flex items-center bg-white px-3 py-1 rounded-full shadow-sm border border-slate-100">
                         <span class="text-[10px] font-bold text-slate-400 mr-2">ê´€ë¦¬ ëª¨ë“œ</span>
                         <button onclick="toggleEditMode()" id="edit-toggle-btn" class="w-8 h-4 bg-slate-200 rounded-full relative transition-colors duration-300">
                             <div class="w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 absolute top-0 left-0"></div>
                         </button>
                    </div>
                </div>

                <!-- íŒ€ í”„ë¡œí•„ -->
                <div class="bg-white rounded-3xl p-6 mb-6 shadow-sm border border-indigo-50 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-indigo-500 blur-3xl opacity-10 -mr-10 -mt-10 rounded-full"></div>
                    <div class="flex items-center mb-6 relative z-10">
                        <div class="w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center text-3xl shadow-inner mr-4">ğŸ¦…</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-slate-900">í•œì‹ ëŒ€ ë¹„ìƒ</h3>
                            <p class="text-indigo-500 text-xs font-bold tracking-wider uppercase">Hanshin Univ. Bisang</p>
                        </div>
                    </div>
                    <div class="flex justify-between text-center bg-slate-50 rounded-2xl p-4">
                        <div><p class="text-[10px] text-slate-400 font-bold mb-1">ê²½ê¸°ìˆ˜</p><p class="font-extrabold text-slate-700">25</p></div>
                        <div><p class="text-[10px] text-slate-400 font-bold mb-1">ìŠ¹ë¦¬</p><p class="font-extrabold text-indigo-600">22</p></div>
                        <div><p class="text-[10px] text-slate-400 font-bold mb-1">ìŠ¹ë¥ </p><p class="font-extrabold text-slate-700">88%</p></div>
                    </div>
                </div>

                <!-- ì„ ìˆ˜ ëª…ë‹¨ -->
                <div class="mb-20">
                    <div class="flex justify-between items-center mb-3 px-1">
                        <h3 class="font-bold text-slate-700">ì„ ìˆ˜ ëª…ë‹¨ <span class="text-indigo-500 text-sm ml-1" id="roster-count">0</span></h3>
                    </div>
                    
                    <div id="roster-list" class="space-y-3">
                        <!-- JSë¡œ ì„ ìˆ˜ ëª…ë‹¨ ë Œë”ë§ -->
                    </div>

                    <!-- ì„ ìˆ˜ ì¶”ê°€ í¼ (ê´€ë¦¬ ëª¨ë“œì¼ ë•Œë§Œ í‘œì‹œ) -->
                    <div id="add-player-form" class="hidden mt-4 bg-slate-100 p-4 rounded-2xl animate-pulse">
                        <p class="text-xs font-bold text-slate-500 mb-2">ìƒˆ ì„ ìˆ˜ ë“±ë¡</p>
                        <div class="flex space-x-2 mb-2">
                            <input type="text" id="new-player-name" placeholder="ì´ë¦„" class="flex-1 p-2 rounded-lg text-sm border-none focus:ring-2 focus:ring-indigo-500">
                            <select id="new-player-pos" class="p-2 rounded-lg text-sm border-none focus:ring-2 focus:ring-indigo-500 w-20">
                                <option value="L">L</option>
                                <option value="S">S</option>
                                <option value="OH">OH</option>
                                <option value="OP">OP</option>
                                <option value="MB">MB</option>
                            </select>
                        </div>
                        <button onclick="addPlayer()" class="w-full bg-slate-800 text-white text-xs font-bold py-3 rounded-xl hover:bg-slate-700">ë“±ë¡í•˜ê¸°</button>
                    </div>
                </div>
            </div>

            <!-- 4. ë§¤ì¹˜ ë©”ì´í‚¹ (ê¸€ì“°ê¸°) -->
            <div id="page-write-post" class="hidden fade-in">
                <div class="flex items-center mb-8 pt-2">
                    <button onclick="router('home')" class="mr-4 w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-500 shadow-sm"><i class="fa-solid fa-arrow-left"></i></button>
                    <h2 class="text-2xl font-bold text-slate-800">ë§¤ì¹˜ ë©”ì´í‚¹</h2>
                </div>
                <div class="space-y-6">
                    <!-- ê²½ê¸° ë°©ì‹ ì„ íƒ -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Game Type</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectWriteOption(this, 'type', '9man')" class="write-opt-type p-4 rounded-2xl bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-500/30 transition" data-value="9man">9ì¸ì œ</button>
                            <button onclick="selectWriteOption(this, 'type', '6man')" class="write-opt-type p-4 rounded-2xl bg-white text-slate-400 border border-slate-200 font-medium transition" data-value="6man">6ì¸ì œ</button>
                        </div>
                    </div>
                    <!-- ì„±ë³„ ì„ íƒ -->
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Gender</label>
                        <div class="grid grid-cols-3 gap-3">
                            <button onclick="selectWriteOption(this, 'gender', 'male')" class="write-opt-gender p-4 rounded-2xl bg-white text-slate-400 border border-slate-200 font-medium transition" data-value="male">ë‚¨ì</button>
                            <button onclick="selectWriteOption(this, 'gender', 'female')" class="write-opt-gender p-4 rounded-2xl bg-white text-slate-400 border border-slate-200 font-medium transition" data-value="female">ì—¬ì</button>
                            <button onclick="selectWriteOption(this, 'gender', 'mixed')" class="write-opt-gender p-4 rounded-2xl bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-500/30 transition" data-value="mixed">í˜¼ì„±</button>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Details</label>
                        <input type="text" id="write-location" placeholder="ì¥ì†Œ (ì˜ˆ: í•œì‹ ëŒ€ ì²´ìœ¡ê´€)" class="w-full p-4 bg-white rounded-2xl border border-slate-100 shadow-sm text-sm outline-none focus:ring-2 focus:ring-indigo-500 mb-3">
                        <input type="datetime-local" id="write-time" class="w-full p-4 bg-white rounded-2xl border border-slate-100 shadow-sm text-sm outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2 ml-1">Note (ë¹„ê³ )</label>
                        <input type="text" id="write-note" placeholder="ì˜ˆ: ì£¼ì°¨ í˜‘ì†Œ, ì„ ì¶œ í¬í•¨ ë“±" class="w-full p-4 bg-white rounded-2xl border border-slate-100 shadow-sm text-sm outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <button onclick="submitPost()" class="w-full bg-slate-900 text-white font-bold py-4 rounded-2xl shadow-xl mt-4">ëª¨ì§‘ ì‹œì‘í•˜ê¸°</button>
                </div>
            </div>

             <!-- 5. ë§¤ì¹­ ìƒì„¸ -->
             <div id="page-match-detail" class="hidden fade-in">
                 <!-- í—¤ë” ì´ë¯¸ì§€ ì˜ì—­ -->
                 <div class="relative h-64 bg-slate-800 -mx-5 -mt-5 mb-6 p-6 flex flex-col justify-end overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1612872087720-48ca45ddce4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="absolute inset-0 w-full h-full object-cover opacity-40">
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
                    
                    <button onclick="router('home')" class="absolute top-4 left-4 w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center text-white border border-white/20"><i class="fa-solid fa-arrow-left"></i></button>
                    
                    <div class="relative z-10">
                        <div class="flex space-x-2 mb-3">
                            <span id="detail-badge-type" class="bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-full">9ì¸ì œ</span>
                            <span id="detail-badge-gender" class="bg-white/20 backdrop-blur-md text-white text-[10px] font-bold px-2 py-1 rounded-full">í˜¼ì„±</span>
                        </div>
                        <h2 id="detail-title" class="text-3xl font-extrabold text-white leading-tight mb-1">í•œì‹ ëŒ€ ë¹„ìƒ</h2>
                        <p id="detail-location-header" class="text-slate-300 text-sm"><i class="fa-solid fa-location-dot mr-1"></i> í•œì‹ ëŒ€í•™êµ ì²´ìœ¡ê´€</p>
                    </div>
                </div>

                <div class="space-y-6 px-2">
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-slate-100">
                        <h3 class="font-bold text-slate-800 mb-4 text-sm uppercase tracking-wider">Match Info</h3>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 mr-3"><i class="fa-regular fa-clock"></i></div>
                                <div><p class="text-xs text-slate-400">ì¼ì‹œ</p><p class="font-bold text-slate-700" id="detail-time">11ì›” 24ì¼ (ê¸ˆ) 18:00</p></div>
                            </div>
                             <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-pink-50 flex items-center justify-center text-pink-600 mr-3"><i class="fa-solid fa-circle-info"></i></div>
                                <div><p class="text-xs text-slate-400">ë¹„ê³  (íŠ¹ì´ì‚¬í•­)</p><p class="font-bold text-slate-700" id="detail-remark">ì£¼ì°¨ í˜‘ì†Œ, KUSF ì¤€ë¹„ì¤‘</p></div>
                            </div>
                        </div>
                    </div>

                    <button onclick="sendChallenge()" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition transform active:scale-[0.98]">
                        <i class="fa-solid fa-paper-plane mr-2"></i> ë§¤ì¹­ ì§€ì›í•˜ê¸°
                    </button>
                </div>
             </div>

        </main>

        <!-- í•˜ë‹¨ íƒ­ë°” (Glass Style) -->
        <nav class="glass-nav fixed bottom-0 w-full max-w-md z-50 pb-6 pt-3 px-6 flex justify-between items-center text-gray-400">
            <button onclick="router('home')" id="nav-home" class="flex flex-col items-center text-indigo-600 transition transform active:scale-90">
                <i class="fa-solid fa-house text-xl mb-1"></i>
            </button>
            <button onclick="router('locker')" id="nav-locker" class="flex flex-col items-center hover:text-indigo-600 transition transform active:scale-90">
                <i class="fa-solid fa-shirt text-xl mb-1"></i>
            </button>
            <button onclick="router('page-login')" class="flex flex-col items-center hover:text-indigo-600 transition transform active:scale-90">
                <i class="fa-solid fa-right-from-bracket text-xl mb-1"></i>
            </button>
        </nav>

    </div>

    <script>
        // ------------------- Data (Mock) -------------------
        
        // 1. ë§¤ì¹­ ê³µê³  ë°ì´í„° (5ê°œ)
        let matches = [
            { id: 1, team: 'í•œì‹ ëŒ€ ë¹„ìƒ', type: '9man', gender: 'mixed', time: '11/24 18:00', loc: 'í•œì‹ ëŒ€ ì²´ìœ¡ê´€', remark: 'ì£¼ì°¨ í˜‘ì†Œ, KUSF ì¤€ë¹„', badge: 'ëª¨ì§‘ì¤‘', badgeColor: 'bg-indigo-100 text-indigo-600' },
            { id: 2, team: 'ê³ ë ¤ëŒ€ KUVC', type: '6man', gender: 'male', time: '11/26 14:00', loc: 'ê³ ë ¤ëŒ€ í™”ì •ì²´ìœ¡ê´€', remark: 'ì„ ìˆ˜ì¶œì‹  1ëª… í¬í•¨', badge: 'ì›ì •', badgeColor: 'bg-slate-100 text-slate-600' },
            { id: 3, team: 'ì´í™”ì—¬ëŒ€ EAVC', type: '6man', gender: 'female', time: '11/27 19:00', loc: 'ì´í™”ì—¬ëŒ€ ì²´ìœ¡ê´€', remark: 'ì¹œì„  ê²½ê¸° í™˜ì˜', badge: 'ëª¨ì§‘ì¤‘', badgeColor: 'bg-indigo-100 text-indigo-600' },
            { id: 4, team: 'ì—°ì„¸ëŒ€ ë°°êµ¬ë¶€', type: '9man', gender: 'male', time: '11/25 10:00', loc: 'ì—°ì„¸ëŒ€ ì‹ ì´Œìº í¼ìŠ¤', remark: 'ë¬¼ ì œê³µ, ìƒ¤ì›Œ ê°€ëŠ¥', badge: 'ë§ˆê°ì„ë°•', badgeColor: 'bg-red-100 text-red-600' },
            { id: 5, team: 'ì„œìš¸ì‹œë¦½ëŒ€', type: '6man', gender: 'mixed', time: '11/28 18:00', loc: 'ì‹œë¦½ëŒ€ ì›°ë‹ˆìŠ¤ì„¼í„°', remark: 'íšŒì‹ ê°€ëŠ¥', badge: 'ì¹œì„ ', badgeColor: 'bg-green-100 text-green-600' }
        ];

        // 2. ìš°ë¦¬ íŒ€ ì„ ìˆ˜ ëª…ë‹¨ (ì´ˆê¸° ë°ì´í„°)
        let roster = [
            { id: 1, name: 'ì •ë¬´í˜„', pos: 'MB', role: 'Captain' },
            { id: 2, name: 'ì´ê°•ë¯¼', pos: 'MB', role: '' },
            { id: 3, name: 'ìœ¤ì¬í˜', pos: 'S', role: '' },
            { id: 4, name: 'ì´ì¤€ìš°', pos: 'OH', role: '' },
            { id: 5, name: 'ì„ê¸°ì£¼', pos: 'S', role: '' },
            { id: 6, name: 'ê¹€ì„í™˜', pos: 'L', role: '' }
        ];

        let isEditMode = false; // ê´€ë¦¬ ëª¨ë“œ ìƒíƒœ
        
        // ê¸€ì“°ê¸° ì„ì‹œ ìƒíƒœ ì €ì¥
        let writeState = { type: '9man', gender: 'mixed' };

        // ------------------- Logic -------------------

        // 1. ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ & í•„í„°ë§
        function renderMatches(filterType = 'all') {
            const container = document.getElementById('match-list-container');
            container.innerHTML = ''; // ì´ˆê¸°í™”

            const filtered = matches.filter(m => {
                if (filterType === 'all') return true;
                if (filterType === 'male') return m.gender === 'male';
                if (filterType === 'female') return m.gender === 'female';
                if (filterType === 'mixed') return m.gender === 'mixed';
                return m.type === filterType;
            });

            if (filtered.length === 0) {
                container.innerHTML = `<div class="text-center py-10 text-slate-400 text-sm">ì¡°ê±´ì— ë§ëŠ” ë§¤ì¹­ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            filtered.forEach(m => {
                const genderLabel = m.gender === 'male' ? 'ë‚¨ì' : (m.gender === 'female' ? 'ì—¬ì' : 'í˜¼ì„±');
                const typeLabel = m.type === '9man' ? '9ì¸ì œ' : '6ì¸ì œ';
                
                const html = `
                    <div onclick="openMatchDetail(${m.id})" class="bg-white p-5 rounded-3xl shadow-sm border border-slate-100 hover:shadow-md transition active:scale-[0.98] cursor-pointer">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex space-x-1">
                                <span class="px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-bold">${typeLabel}</span>
                                <span class="px-2 py-1 rounded-lg bg-slate-100 text-slate-600 text-[10px] font-bold">${genderLabel}</span>
                            </div>
                            <span class="${m.badgeColor} text-[10px] font-bold px-2 py-1 rounded-full">${m.badge}</span>
                        </div>
                        <h3 class="font-bold text-lg text-slate-800 mb-1">${m.team}</h3>
                        <div class="flex items-center text-xs text-slate-500 mt-2 space-x-3">
                            <span><i class="fa-regular fa-clock mr-1"></i> ${m.time}</span>
                            <span><i class="fa-solid fa-location-dot mr-1"></i> ${m.loc}</span>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // í•„í„° ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
        function filterMatches(type, btn) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('bg-indigo-600', 'text-white');
                b.classList.add('bg-white', 'text-slate-500');
            });
            // ì„ íƒëœ ë²„íŠ¼ í™œì„±í™”
            btn.classList.remove('bg-white', 'text-slate-500');
            btn.classList.add('bg-indigo-600', 'text-white');
            
            renderMatches(type);
        }

        // 2. ìƒì„¸ í˜ì´ì§€ ë°ì´í„° ë°”ì¸ë”©
        function openMatchDetail(id) {
            const m = matches.find(item => item.id === id);
            if(!m) return;

            document.getElementById('detail-title').innerText = m.team;
            document.getElementById('detail-time').innerText = m.time;
            document.getElementById('detail-location-header').innerHTML = `<i class="fa-solid fa-location-dot mr-1"></i> ${m.loc}`;
            document.getElementById('detail-remark').innerText = m.remark;
            
            document.getElementById('detail-badge-type').innerText = m.type === '9man' ? '9ì¸ì œ' : '6ì¸ì œ';
            document.getElementById('detail-badge-gender').innerText = m.gender === 'male' ? 'ë‚¨ì' : (m.gender === 'female' ? 'ì—¬ì' : 'í˜¼ì„±');

            router('match-detail');
        }

        // ë§¤ì¹­ ì§€ì›í•˜ê¸°
        function sendChallenge() {
            if(confirm('ìƒëŒ€ íŒ€ ì£¼ì¥ì—ê²Œ êµë¥˜ì „ ì œì•ˆì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ğŸš€ ë§¤ì¹­ ì§€ì›ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nìƒëŒ€ë°©ì´ ìˆ˜ë½í•˜ë©´ ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.');
                router('home');
            }
        }

        // 3. ë¼ì»¤ë£¸(íŒ€ ê´€ë¦¬) ë¡œì§
        function renderRoster() {
            const container = document.getElementById('roster-list');
            document.getElementById('roster-count').innerText = roster.length;
            container.innerHTML = '';

            roster.forEach(p => {
                let deleteBtn = '';
                if (isEditMode) {
                    // stopPropagationì„ ì¶”ê°€í•˜ì—¬ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë¶€ëª¨ë¡œ ì „íŒŒë˜ëŠ” ê²ƒì„ ë°©ì§€ (í˜¹ì‹œ ëª¨ë¥¼ ë²„ê·¸ ì˜ˆë°©)
                    deleteBtn = `<button onclick="event.stopPropagation(); deletePlayer(${p.id})" class="text-red-500 ml-3 text-sm w-8 h-8 flex items-center justify-center bg-red-50 rounded-full"><i class="fa-solid fa-minus"></i></button>`;
                }

                const roleBadge = p.role === 'Captain' ? '<i class="fa-solid fa-crown text-yellow-500 ml-1 text-xs"></i>' : '';
                
                // í¬ì§€ì…˜ ë±ƒì§€
                let posColorClass = '';
                switch(p.pos) {
                    case 'MB': posColorClass = 'bg-red-100 text-red-800'; break;
                    case 'S': posColorClass = 'bg-yellow-100 text-yellow-800'; break;
                    case 'OH': posColorClass = 'bg-blue-100 text-blue-800'; break;
                    case 'L': posColorClass = 'bg-green-100 text-green-800'; break;
                    case 'OP': posColorClass = 'bg-purple-100 text-purple-800'; break;
                    default: posColorClass = 'bg-gray-100 text-gray-800';
                }

                const html = `
                    <div class="flex items-center bg-white p-3 rounded-2xl border border-slate-100 shadow-sm">
                        <div class="w-10 h-10 rounded-full flex items-center justify-center text-[10px] font-bold shrink-0 ${posColorClass}">${p.pos}</div>
                        <div class="ml-3 flex-1">
                            <p class="text-sm font-bold text-slate-800">${p.name} ${roleBadge}</p>
                        </div>
                        ${deleteBtn}
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function toggleEditMode() {
            isEditMode = !isEditMode;
            const btn = document.getElementById('edit-toggle-btn');
            const indicator = btn.querySelector('div');
            const form = document.getElementById('add-player-form');

            if (isEditMode) {
                btn.classList.replace('bg-slate-200', 'bg-indigo-500');
                indicator.classList.replace('left-0', 'translate-x-4');
                form.classList.remove('hidden');
            } else {
                btn.classList.replace('bg-indigo-500', 'bg-slate-200');
                indicator.classList.remove('translate-x-4');
                indicator.classList.add('left-0');
                form.classList.add('hidden');
            }
            renderRoster();
        }

        function addPlayer() {
            const name = document.getElementById('new-player-name').value;
            const pos = document.getElementById('new-player-pos').value;

            if (!name) return alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');

            roster.push({ id: Date.now(), name: name, pos: pos, role: '' });
            document.getElementById('new-player-name').value = ''; // ì´ˆê¸°í™”
            renderRoster();
        }

        function deletePlayer(id) {
            if(confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // IDê°€ ìˆ«ìí˜•ì´ë¯€ë¡œ ì—„ê²©í•œ ë¹„êµ(===) ë˜ëŠ” ëŠìŠ¨í•œ ë¹„êµ(==) ì£¼ì˜
                roster = roster.filter(p => p.id !== id);
                renderRoster();
            }
        }

        // 4. ë§¤ì¹˜ ë©”ì´í‚¹ (ê¸€ì“°ê¸°) ë¡œì§
        
        // ê¸€ì“°ê¸° ì˜µì…˜ ì„ íƒ (ë²„íŠ¼ UI í† ê¸€)
        function selectWriteOption(btn, category, value) {
            // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            const buttons = document.querySelectorAll(`.write-opt-${category}`);
            buttons.forEach(b => {
                b.className = `write-opt-${category} p-4 rounded-2xl bg-white text-slate-400 border border-slate-200 font-medium transition`;
            });
            
            // ì„ íƒëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì ìš©
            btn.className = `write-opt-${category} p-4 rounded-2xl bg-indigo-600 text-white font-bold shadow-lg shadow-indigo-500/30 transition`;
            
            // ìƒíƒœ ì €ì¥
            writeState[category] = value;
        }

        // ê³µê³  ë“±ë¡ ì œì¶œ
        function submitPost() {
            const loc = document.getElementById('write-location').value;
            const timeInput = document.getElementById('write-time').value;
            const note = document.getElementById('write-note').value;

            if(!loc || !timeInput) return alert('ì¥ì†Œì™€ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            
            // ë‚ ì§œ í¬ë§·íŒ… (YYYY-MM-DDTHH:MM -> MM/DD HH:MM)
            const dateObj = new Date(timeInput);
            const formattedTime = `${dateObj.getMonth()+1}/${dateObj.getDate()} ${dateObj.getHours().toString().padStart(2, '0')}:${dateObj.getMinutes().toString().padStart(2, '0')}`;

            // ìƒˆ ë§¤ì¹­ ê°ì²´ ìƒì„±
            const newMatch = {
                id: Date.now(), // ê³ ìœ  ID
                team: 'í•œì‹ ëŒ€ ë¹„ìƒ', // í˜„ì¬ ì‚¬ìš©ì íŒ€
                type: writeState.type,
                gender: writeState.gender,
                time: formattedTime,
                loc: loc,
                remark: note || 'íŠ¹ì´ì‚¬í•­ ì—†ìŒ',
                badge: 'NEW',
                badgeColor: 'bg-yellow-100 text-yellow-600'
            };

            // ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ì— ì¶”ê°€
            matches.unshift(newMatch);
            
            alert('ë§¤ì¹­ ê³µê³ ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // í¼ ì´ˆê¸°í™” ë° í™ˆìœ¼ë¡œ ì´ë™
            document.getElementById('write-location').value = '';
            document.getElementById('write-time').value = '';
            document.getElementById('write-note').value = '';
            renderMatches('all'); // ë¦¬ìŠ¤íŠ¸ ê°±ì‹ 
            router('home');
        }


        // 5. ë¼ìš°í„°
        function router(page) {
            const pages = ['page-login', 'home', 'locker', 'write-post', 'match-detail'];
            
            // í˜ì´ì§€ ì „í™˜ ì „ ì²˜ë¦¬
            pages.forEach(p => {
                const el = document.getElementById(p.startsWith('page-') ? p : `page-${p}`);
                if(el) el.classList.add('hidden');
            });

            const targetId = page.startsWith('page-') ? page : `page-${page}`;
            document.getElementById(targetId).classList.remove('hidden');

            // í—¤ë” & íƒ­ë°” ì œì–´
            const headerActions = document.getElementById('header-actions');
            if(page === 'home' || page === 'locker') headerActions.classList.remove('hidden');
            else headerActions.classList.add('hidden');

            // íƒ­ í™œì„±í™” UI
            const updateTab = (id, active) => {
                const el = document.getElementById(id);
                if(active) el.className = 'flex flex-col items-center text-indigo-600 transition transform active:scale-90';
                else el.className = 'flex flex-col items-center text-gray-400 hover:text-indigo-600 transition transform active:scale-90';
            };

            updateTab('nav-home', page === 'home');
            updateTab('nav-locker', page === 'locker');
            
            window.scrollTo(0,0);
        }

        // ì´ˆê¸° ì‹¤í–‰
        window.onload = () => {
            renderMatches('all');
            renderRoster();
            router('page-login'); // ì‹œì‘ í™”ë©´: ë¡œê·¸ì¸
        };
    </script>
</body>
</html>

